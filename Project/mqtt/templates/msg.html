<!DOCTYPE html>
<html>
<head>
    <link rel="icon" type="image/x-icon" href="data:image/png;base64,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">
    <meta charset="utf-8">
    <title>MQTT Messages</title>
    <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> -->
</head>
<body>
    <h1>MQTT Message:</h1>
    <!-- Loop through the messages and display them -->
    {% for messages in message %}
        <p>Received message {{ messages }}</p><hr>
    {% endfor %}
    <ul id="messages"></ul>

    <!--<script>
        // Establish a WebSocket connection
        var socket = new WebSocket("ws://" + window.location.host + "/ws/meter/");

        // When a message is received, append it to the list
        socket.on_message = function(event) {
            var li = document.createElement("li");
            li.innerHTML = event.data;
            document.getElementById("messages").appendChild(li);
        }
    </script>-->
</body>

<script>
var socket = new WebSocket('ws://' + window.location.host + '/ws/meter/');

socket.onmessage = function(event) {
    var message = event.data;
    document.getElementById("console-output").innerHTML += message + "<br>";
    console.log(JSON.parse(message));// Code to handle incoming WebSocket messages goes here
};

socket.onclose = function(event) {
    console.log('close event', event);
}
</script>

<div id="console-output"></div>

</html>